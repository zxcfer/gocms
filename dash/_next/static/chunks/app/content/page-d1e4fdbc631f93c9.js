(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{73802:function(e,t,n){Promise.resolve().then(n.bind(n,82189))},82189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(57437),l=n(8792),i=n(34560),a=n(57654),o=n(15e3),s=n(75006),c=n(97081),u=n(76540),d=n(70769),f=n(47907),m=n(2265),h=n(79984),v=n(31548),p=n(60834),g=n(83187);function x(){var e,t;let n=(0,f.useSearchParams)(),x=null!==(e=n.get("schema"))&&void 0!==e?e:"",j=n.get("limit"),w=n.get("page"),y=n.get("sort"),N=n.get("filter"),b=(0,h.JT)(x),S=(0,c.rV)(x);(0,m.useEffect)(()=>{var e;return(0,i.D8)({title:(0,c.rV)(null!==(e=null==b?void 0:b.namespace)&&void 0!==e?e:""),description:"List all records of ".concat(S),breadcrumbs:[{name:S,path:"/content?schema="+x}],actions:[(0,r.jsx)(l.default,{href:"/content/edit?schema="+x,children:(0,r.jsx)(a.z,{size:"sm",icon:(0,r.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),children:"New record"})},"create")]}),i.D8},[x]);let{data:_,isLoading:k,error:I,refetch:q}=(0,u.a)({queryKey:["schema",x],queryFn:()=>(0,v.Q7)(x,{limit:j?parseInt(j):void 0,page:w?parseInt(w):void 0,sort:null!=y?y:void 0,filter:N?JSON.parse(N):void 0}),retry:0});return(null==b?void 0:b.name)?k?(0,r.jsx)(s.g,{}):I?(0,r.jsx)(o.T,{error:I}):(0,r.jsx)(p.i,{ssr:!0,data:null!==(t=null==_?void 0:_.data)&&void 0!==t?t:[],pagination:null==_?void 0:_.pagination,sort:y,columns:(0,g.qJ)(b,()=>{q()}),enableRowSelection:!0,getRowId:e=>{var t;return String(null!==(t=e.id)&&void 0!==t?t:"")},filterTitle:"Filter ".concat((0,c.rV)(b.name)),request:async e=>{let{pagination:t,sorting:n,columnFilters:r}=e,l={};if((null==t?void 0:t.pageIndex)&&(l.page=t.pageIndex+1),(null==t?void 0:t.pageSize)&&(l.limit=t.pageSize),(null==n?void 0:n.length)&&(l.sort=n.map(e=>{let{id:t,desc:n}=e;return"".concat(n?"-":"").concat(t)}).join(",")),null==r?void 0:r.length)for(let{id:e,value:t}of(l.filter={},r))l.filter[e]={$like:"%".concat(t,"%")};let i=(0,v.rP)(l),a="/content?schema=".concat(x,"&").concat(i);return window.history.replaceState({...window.history.state,as:a,url:a},"",a),(0,v.Q7)(x,l)}}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-center text-2xl font-bold",children:"Please select a schema"})})}}},function(e){e.O(0,[310,572,902,637,872,792,571,32,732,152,998,147,203,807,365,313,156,704,547,117,271,650,834,971,69,744],function(){return e(e.s=73802)}),_N_E=e.O()}]);