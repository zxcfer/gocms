"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{15e3:function(e,t,l){l.d(t,{T:function(){return d}});var a=l(57437),s=l(29069),n=l(62985),r=l(95601),i=l.n(r);let d=e=>{var t;let{title:l,description:r,error:d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:null!=l?l:"Error"})}),(0,a.jsxs)(s.bZ,{variant:"destructive",children:[(0,a.jsx)(n.Z,{size:16,className:"mr-2"}),(0,a.jsx)(s.Cd,{children:null!=l?l:"Error"}),(null==d?void 0:d.message)||r&&(0,a.jsx)(s.X,{children:null!==(t=null==d?void 0:d.message)&&void 0!==t?t:r})]})]})}},18157:function(e,t,l){l.d(t,{EC:function(){return s},l:function(){return n},mb:function(){return r}});var a=l(31548);let s=e=>(null==e?void 0:e.type)==="m2m"||(null==e?void 0:e.type)==="o2m"&&!!(null==e?void 0:e.owner),n=(e,t,l,a,s,n)=>{if(!a){if(e.length){l(e[0]);return}if(!e.length&&t.length){l(s?null:void 0);return}l(s?null:void 0);return}let r=e.map(e=>({id:e.id})),i=r.length?r:void 0,d=t.map(e=>({id:e.id})),c=d.length?d:void 0,o=(null==i?void 0:i.length)||!s?i:null;l(n?{$add:i,$clear:c}:o)},r=async(e,t,l,s,n)=>{if(!s||!e.relation)return;let r={};if(t&&(r[s.label_field]={$like:"%".concat(t,"%")}),n){let t=e.relation.field;r["".concat(t,".id")]=n}return await (0,a.Q7)(s.name,{page:l,limit:20,filter:Object.keys(r).length?r:void 0,select:"id,".concat(s.label_field)})}},65547:function(e,t,l){l.d(t,{L:function(){return y},Z:function(){return N}});var a=l(57437),s=l(2265),n=l(22169),r=l(3428),i=l(50489),d=l(49108),c=l(37805),o=l(52235),m=l(57654),u=l(76540),x=l(31548),f=l(75006),h=l(15e3),p=l(93412),v=l(27453),g=l(15370);let j=(0,a.jsx)(r.Z,{className:"w-[50%] text-slate-300",width:"50%",height:"50%"}),y=e=>{var t,l,n;let{showUploader:r,onInsert:o,multiple:j}=e,[y,b]=(0,s.useState)(1),[w,k]=(0,s.useState)([]),[$,z]=(0,s.useState)([]),{data:C,isLoading:S,error:_,refetch:Z}=(0,u.a)({queryKey:["media",y],queryFn:()=>(0,x.Q7)("media",{limit:20,page:null!=y?y:void 0}),retry:0}),D=e=>{if(j)return k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);k(w.includes(e)?[]:[e])};return _?(0,a.jsx)(h.T,{error:_}):(0,a.jsxs)("div",{className:"space-y-5 relative h-full",children:[(0,a.jsxs)("div",{className:"flex items-center p-1 bg-muted flex-1 rounded-lg sticky top-0 justify-between z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,a.jsx)(g.Q,{minimal:!0,onMediaUploaded:e=>z(t=>[e,...t]),onUploadComplete:()=>{z([]),Z()}}),o&&(0,a.jsx)(m.z,{size:"sm",onClick:()=>o(w),disabled:!w.length,children:"Insert"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pr-2",children:[(0,a.jsxs)(m.z,{size:"sm",variant:"link",disabled:!w.length,onClick:()=>{w.length&&(async()=>{if(confirm("Are you sure to delete selected medias?"))try{await (0,p.c1)(w.map(e=>e.id)),await Z(),k([]),v.h4.success("Medias deleted successfully")}catch(e){}})()},className:"text-red-500 hover:text-red-600",children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),w.length?"Delete selected (".concat(w.length,")"):"Delete selected"]}),(0,a.jsxs)(m.z,{variant:"outline",size:"sm",disabled:1===y,onClick:()=>{y>1&&b(y-1)},children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Previous"]}),(0,a.jsxs)(m.z,{variant:"outline",size:"sm",disabled:y===(null==C?void 0:null===(t=C.pagination)||void 0===t?void 0:t.last_page),onClick:()=>{var e,t;y<(null!==(t=null==C?void 0:null===(e=C.pagination)||void 0===e?void 0:e.last_page)&&void 0!==t?t:1)&&b(y+1)},children:["Next",(0,a.jsx)(c.Z,{className:"ml-2 h-4 w-4"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[y," of ",null==C?void 0:null===(l=C.pagination)||void 0===l?void 0:l.last_page]})})]})]}),S?(0,a.jsx)(f.g,{}):(0,a.jsxs)("div",{className:"flex flex-wrap gap-5",children:[$.map(e=>(0,a.jsx)(N,{media:e,selectedMedias:w,onClick:D},e.id)),(null!==(n=null==C?void 0:C.data)&&void 0!==n?n:[]).map(e=>(0,a.jsx)(N,{media:e,selectedMedias:w,onClick:D},e.id))]})]})},N=e=>{let{media:t,onClick:l,selectedMedias:s,wrapperClassName:r,hideInfo:i,onUnAttach:d}=e,c=!!(null!=s?s:[]).filter(e=>e.id===t.id).length,m=(0,n.cn)("cursor-pointer rounded-md overflow-hidden bg-slate-100 border hover:shadow-lg",c&&"border-2 border-amber-300 shadow-sm hover:shadow-amber-100");return(0,a.jsxs)("div",{className:(0,n.cn)("flex flex-wrap w-full sm:w-full md:w-[200px] xl:w-[230px] relative",r),role:"none",onClick:()=>null==l?void 0:l(t),children:[d&&(0,a.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,a.jsx)("button",{type:"button",onClick:()=>d(t),className:"p-1 rounded-full bg-slate-200 hover:bg-slate-300",children:(0,a.jsx)(o.Z,{className:"h-3 w-3"})})}),(0,a.jsxs)("div",{className:m,children:[(0,a.jsx)("div",{className:"flex w-full aspect-square items-center justify-center p-1 bg-slate-50",children:t.type.startsWith("image/")?(0,a.jsx)("img",{className:"max-h-full object-contain object-center rounded-sm",alt:t.name,src:t.url}):j}),!i&&(0,a.jsx)("div",{className:"flex-1 p-3 border-t",children:(0,a.jsxs)("div",{className:"space-y-1 text-sm break-words",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:t.type.split(";")[0]}),(0,a.jsx)("h3",{className:"font-medium leading line-clamp-1",children:t.name})]})})]})]})}},15370:function(e,t,l){l.d(t,{Q:function(){return p}});var a=l(57437),s=l(2265),n=l(94509),r=l(62985),i=l(54739),d=l(3428);let c=e=>{let{file:t}=e,[l,n]=(0,s.useState)(),r=(0,a.jsx)(d.Z,{className:"w-[40px] text-slate-500",width:40,height:40});return((0,s.useEffect)(()=>{if(!t||!t.type.startsWith("image/"))return;let e=new FileReader;e.onload=()=>{n(e.result)},e.readAsDataURL(t)},[t]),t&&t.type.startsWith("image/")&&l)?(0,a.jsx)("img",{className:"h-auto rounded-lg",src:l,alt:""}):r};var o=l(5887),m=l(93412),u=l(22169),x=l(57654),f=l(62677),h=l(97081);let p=e=>{let{uploadContainerClass:t,minimal:l,onMediaUploaded:d,onUploadComplete:p}=e,[v,g]=(0,s.useState)({}),[j,y]=(0,s.useState)(""),[N,b]=(0,s.useState)([]),{getRootProps:w,getInputProps:k,isDragActive:$,acceptedFiles:z}=(0,i.uI)();return(0,s.useEffect)(()=>{z.length&&(async()=>{let e=0;for(let a=0;a<z.length;a++)try{var t,l;g(e=>({...e,[a]:"uploading"}));let s=await (0,m.cT)(z[a]);(null==s?void 0:null===(t=s.success)||void 0===t?void 0:t.length)?g(e=>({...e,[a]:"success"})):g(e=>({...e,[a]:"error"})),e++,y("".concat(e,"/").concat(z.length)),null==d||d(null==s?void 0:null===(l=s.success)||void 0===l?void 0:l[0])}catch(e){g(t=>{var l;return{...t,[a]:null!==(l=e.message)&&void 0!==l?l:"Unknown error"}}),b(t=>{var l;return[...t,"".concat(z[a].name,": ").concat(null!==(l=e.message)&&void 0!==l?l:"Unknown error")]})}await (0,h._v)(1e3),null==p||p()})()},[z]),(0,a.jsxs)("div",{className:"space-y-5",children:[l?(0,a.jsxs)("div",{className:"flex flex-row space-x-2 align-middle items-center",children:[(0,a.jsxs)("div",{...w(),children:[(0,a.jsx)("input",{...k(),type:"file",className:"hidden"}),(0,a.jsxs)(x.z,{size:"sm",variant:"outline",children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Upload"})]})]}),j&&(0,a.jsxs)("div",{className:"flex flex-row align-middle items-center gap-1 text-sm",children:[(0,a.jsx)("span",{children:j}),!!N.length&&(0,a.jsx)(f.pn,{children:(0,a.jsxs)(f.u,{children:[(0,a.jsx)(f.aJ,{children:(0,a.jsx)(r.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),(0,a.jsx)(f._v,{children:N.map(e=>(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400",children:e},e))})]})})]})]}):(0,a.jsxs)("div",{...w(),className:(0,u.cn)("flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",t),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)(n.Z,{className:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400"}),(0,a.jsx)("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:$?"Drop the files here ...":"Drag and drop some files here, or click to select files"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"SVG, PNG, JPG, GIF, PDF, DOCX, XLSX..."})]}),(0,a.jsx)("input",{...k(),id:"dropzone-file",type:"file",className:"hidden"})]}),!l&&z.length?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(o.iA,{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,a.jsx)(o.xD,{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)(o.SC,{className:"text-gray-800 dark:text-gray-300",children:[(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold"}),(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold min-w-[10rem]",children:"Name"}),(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold min-w-[10rem]",children:"Type"}),(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold min-w-[6rem]",children:"Size"}),(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold min-w-[6rem]",children:"Status"}),(0,a.jsx)(o.ss,{scope:"col",className:"p-3.5 px-2 text-sm text-start font-semibold min-w-[8rem]",children:"Action"})]})}),(0,a.jsx)(o.RM,{className:"divide-y divide-gray-200 dark:divide-gray-600",children:z.map((e,t)=>{var l;let s=null!==(l=v[t])&&void 0!==l?l:"pending";return(0,a.jsxs)(o.SC,{children:[(0,a.jsx)(o.pj,{className:"p-2 max-w-[50px] flex items-center",children:(0,a.jsx)(c,{file:e})}),(0,a.jsx)(o.pj,{className:"p-2 text-sm text-gray-700 dark:text-gray-400 font-medium",children:e.name}),(0,a.jsx)(o.pj,{className:"p-2 text-sm text-gray-700 dark:text-gray-400",children:(0,a.jsx)("p",{children:e.type})}),(0,a.jsxs)(o.pj,{className:"p-2 text-sm text-gray-700 dark:text-gray-400",children:[e.size," bytes"]}),(0,a.jsx)(o.pj,{className:"p-2 text-sm text-gray-700 dark:text-gray-400",children:s}),(0,a.jsx)(o.pj,{className:"p-2 text-sm text-gray-700 dark:text-gray-400",children:"success"===s&&(0,a.jsxs)("div",{className:"flex space-x-2 items-center justify-center w-full h-full text-sm",children:[(0,a.jsx)("a",{href:"/link-to-file",className:"hover:underline text-blue-800",target:"_blank",rel:"noreferrer",children:"View"}),(0,a.jsx)("button",{className:"cursor-pointer hover:underline text-red-800",type:"button",children:"Delete"})]})})]},e.name)})})]})}):null]})}},29069:function(e,t,l){l.d(t,{Cd:function(){return c},X:function(){return o},bZ:function(){return d}});var a=l(57437),s=l(2265),n=l(57742),r=l(22169);let i=(0,n.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef((e,t)=>{let{className:l,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,r.cn)(i({variant:s}),l),...n})});d.displayName="Alert";let c=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",l),...s})});c.displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",l),...s})});o.displayName="AlertDescription"},62677:function(e,t,l){l.d(t,{_v:function(){return o},aJ:function(){return c},pn:function(){return i},u:function(){return d}});var a=l(57437),s=l(2265),n=l(38152),r=l(22169);let i=n.zt,d=n.fC,c=n.xz,o=s.forwardRef((e,t)=>{let{className:l,sideOffset:s=4,...i}=e;return(0,a.jsx)(n.VY,{ref:t,sideOffset:s,className:(0,r.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l),...i})});o.displayName=n.VY.displayName},31548:function(e,t,l){l.d(t,{Q7:function(){return i},Vj:function(){return n},il:function(){return d},rP:function(){return r},yd:function(){return c}});var a=l(18157),s=l(84971);let n=async(e,t,l)=>{let n={$add:{},$set:{},$clear:{}};for(let s of e.fields)if(s.name in t||s.is_system_field){if("relation"===s.type||"media"===s.type){var r,i;if(l){if(null===t[s.name]){n.$clear[s.name]=!0;continue}if(t[s.name].$nochange)continue;if(!(0,a.EC)(s.relation)){n.$set[s.name]=t[s.name];continue}t[s.name].$add&&(n.$add[s.name]=t[s.name].$add),t[s.name].$clear&&(n.$clear[s.name]=t[s.name].$clear);continue}if(null==t?void 0:null===(r=t[s.name])||void 0===r?void 0:r.$add){n[s.name]=t[s.name].$add;continue}if(null==t?void 0:null===(i=t[s.name])||void 0===i?void 0:i.$clear){delete n[s.name];continue}}n[s.name]=t[s.name]}return 0===Object.keys(n.$add).length&&delete n.$add,0===Object.keys(n.$set).length&&delete n.$set,0===Object.keys(n.$clear).length&&delete n.$clear,l?await (0,s.qb)("/content/".concat(e.name,"/").concat(l),n):await (0,s.SO)("/content/".concat(e.name),n)},r=e=>{let t={};return(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.sort)&&(t.sort=e.sort),(null==e?void 0:e.select)&&(t.select=e.select),(null==e?void 0:e.filter)&&(t.filter=JSON.stringify(e.filter)),new URLSearchParams(t).toString()},i=async(e,t)=>{if(!e)throw Error("Schema name is required");let l={};(null==t?void 0:t.limit)&&(l.limit=t.limit),(null==t?void 0:t.page)&&(l.page=t.page),(null==t?void 0:t.sort)&&(l.sort=t.sort),(null==t?void 0:t.select)&&(l.select=t.select),(null==t?void 0:t.filter)&&(l.filter=JSON.stringify(t.filter));let a=Object.keys(l).length>0?"?"+r(t):"";return(0,s.dX)("/content/".concat(e).concat(a))},d=async(e,t,l)=>{let a=(null==l?void 0:l.length)?"?select=".concat(l.join(",")):"";return(0,s.dX)("/content/".concat(e.name,"/").concat(t).concat(a))},c=async(e,t)=>(0,s.HG)("/content/".concat(e,"/").concat(t))},93412:function(e,t,l){l.d(t,{c1:function(){return n},cT:function(){return s}});var a=l(84971);let s=async e=>{let t=new FormData;return t.append("file",e),await (0,a.SO)("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},n=async e=>await (0,a.HG)("/media",e)}}]);